<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Images and Data</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { display: flex; flex-direction: column; gap: 20px; }
        .search-bar { margin-bottom: 20px; }
        .data-section { display: flex; gap: 20px; }
        .image-box, .data-box { flex: 1; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table, th, td { border: 1px solid #ccc; }
        th, td { padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h1>Search and View Images with Data</h1>
    <form method="get" action="/images" class="search-bar">
        <input type="text" name="search" placeholder="Search by Nama Petugas" value="{{ search_query }}">
        <button type="submit">Search</button>
    </form>

    <div class="container">
        <div class="data-section">
            <div class="image-box">
                <h3>KTP Image</h3>
                {% if ktp_image_url %}
                    <img src="data:image/jpeg;base64,{{ ktp_image_url }}" alt="KTP Image" style="max-width: 300px;">
                {% else %}
                    <p>No KTP image found</p>
                {% endif %}
            </div>
            <div class="data-box">
                <h3>KTP Data</h3>
                {% if ktp_data %}
                    <table>
                        <tr><th>Nama Petugas</th><td>{{ ktp_data[1] }}</td></tr>
                        <tr><th>Provinsi</th><td>{{ ktp_data[2] }}</td></tr>
                        <tr><th>Kabupaten/Kota</th><td>{{ ktp_data[3] }}</td></tr>
                    </table>
                {% else %}
                    <p>No KTP data found</p>
                {% endif %}
            </div>
        </div>

        <div class="data-section">
            <div class="image-box">
                <h3>NPWP Image</h3>
                {% if npwp_image_url %}
                    <img src="data:image/jpeg;base64,{{ npwp_image_url }}" alt="NPWP Image" style="max-width: 300px;">
                {% else %}
                    <p>No NPWP image found</p>
                {% endif %}
            </div>
            <div class="data-box">
                <h3>NPWP Data</h3>
                {% if npwp_data %}
                    <table>
                        <tr><th>Nama Petugas</th><td>{{ npwp_data[1] }}</td></tr>
                        <tr><th>Provinsi</th><td>{{ npwp_data[2] }}</td></tr>
                        <tr><th>Kabupaten/Kota</th><td>{{ npwp_data[3] }}</td></tr>
                    </table>
                {% else %}
                    <p>No NPWP data found</p>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>
